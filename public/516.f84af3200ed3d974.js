"use strict";(self.webpackChunktp_saladejuegos=self.webpackChunktp_saladejuegos||[]).push([[516],{5516:(y,g,a)=>{a.r(g),a.d(g,{PreguntadosModule:()=>A});var o=a(6814),l=a(51),t=a(4946),p=a(7398),d=a(9862);let h=(()=>{var s;class i{constructor(e){this.http=e,this.imageUrl="",this.key="39970197-795398b39a30957cfcdaf60fe"}solicitarImagen(e){return this.http.get(`https://pixabay.com/api/?key=${this.key}&q=${e}`,{headers:{Accept:"application/json"}}).pipe((0,p.U)(n=>(this.imageUrl=n.hits[0].webformatURL,this.imageUrl)))}}return(s=i).\u0275fac=function(e){return new(e||s)(t.LFG(d.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),i})();var m=a(9213),f=a(5019),c=a(5723);let v=(()=>{var s;class i{constructor(){this.firestore=(0,t.f3M)(c.gg),this.instanciaFirestore=(0,c.hJ)(this.firestore,"preguntados")}traerTodasPreguntas(){return(0,c.BS)(this.instanciaFirestore)}}return(s=i).\u0275fac=function(e){return new(e||s)},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),i})();var P=a(3519),u=a.n(P),x=a(1634);function Z(s,i){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"p",5),t._uU(2,"Preguntados"),t.qZA(),t.TgZ(3,"p",6),t._uU(4,"Temas de las preguntas"),t.qZA(),t.TgZ(5,"div",7)(6,"div",8)(7,"div",9),t._UZ(8,"img",10),t.TgZ(9,"div",11)(10,"h5",12),t._uU(11,"Deportes"),t.qZA()()()(),t.TgZ(12,"div",8)(13,"div",9),t._UZ(14,"img",10),t.TgZ(15,"div",11)(16,"h5",12),t._uU(17,"Geografia"),t.qZA()()()(),t.TgZ(18,"div",8)(19,"div",9),t._UZ(20,"img",10),t.TgZ(21,"div",11)(22,"h5",12),t._uU(23,"Ciencia"),t.qZA()()()()(),t.TgZ(24,"div",13)(25,"a",14),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.jugar())}),t._uU(26,"Jugar"),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw();t.xp6(8),t.Q6J("src",r.urlDeportes,t.LSH),t.xp6(6),t.Q6J("src",r.urlGeografia,t.LSH),t.xp6(6),t.Q6J("src",r.urlCiencia,t.LSH)}}function C(s,i){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"div",15)(2,"div",16)(3,"h3",17),t._uU(4),t.qZA(),t._UZ(5,"img",18),t.qZA(),t.TgZ(6,"ul",19)(7,"li",20),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.verRespuesta(1))}),t._uU(8),t.qZA(),t.TgZ(9,"li",21),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.verRespuesta(2))}),t._uU(10),t.qZA(),t.TgZ(11,"li",22),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.verRespuesta(3))}),t._uU(12),t.qZA()()(),t.BQk()}if(2&s){const r=t.oxw();t.xp6(4),t.Oqu(r.pregunta),t.xp6(1),t.Q6J("src",r.urlPregunta,t.LSH),t.xp6(3),t.Oqu(r.op1),t.xp6(2),t.Oqu(r.op2),t.xp6(2),t.Oqu(r.op3)}}const T=[{path:"",component:(()=>{var s;class i{constructor(){this.estadisticasService=(0,t.f3M)(f.P),this.UserAuthService=(0,t.f3M)(m.H),this.preguntadosService=(0,t.f3M)(v),this.apiImagenes=(0,t.f3M)(h),this.pregunta="",this.op1="",this.op2="",this.op3="",this.jugando=!1,this.urlDeportes="",this.urlGeografia="",this.urlCiencia="",this.urlPregunta="",this.respuesta_correcta=0,this.cantRespuestasCorrectas=0,this.cantIntentos=0,this.preguntasSeleccionadas=[],this.estadistica={usuario:"",juego:"preguntados",puntuacion:0,fecha:new Date}}ngOnInit(){this.preguntadosService.traerTodasPreguntas().subscribe(e=>{this.dataPreguntas=e}),this.apiImagenes.solicitarImagen("geografia").subscribe(e=>{this.urlGeografia=e}),this.apiImagenes.solicitarImagen("sport").subscribe(e=>{this.urlDeportes=e}),this.apiImagenes.solicitarImagen("science test tubes").subscribe(e=>{this.urlCiencia=e})}verRespuesta(e){e==this.respuesta_correcta?(u().fire({icon:"success",title:"Respuesta Correcta!"}),this.cantRespuestasCorrectas++,this.verificarPuntuacion()||this.cargarPregunta()):(u().fire({icon:"error",title:"Respuesta Incorrecta!",text:`La respuesta correcta es la opci\xf3n ${this.respuesta_correcta}`}),this.verificarPuntuacion()||this.cargarPregunta())}cargarPregunta(){let e;do{e=this.dataPreguntas[Math.floor(Math.random()*this.dataPreguntas.length)]}while(this.preguntasSeleccionadas.includes(e));this.cargarDatosPreguntaHtml(e),this.cantIntentos++}jugar(){this.jugando=!0,this.cargarPregunta()}verificarPuntuacion(){return this.cantIntentos>=5&&this.UserAuthService.estadoLog().then(()=>(this.estadistica.puntuacion=this.cantRespuestasCorrectas,this.estadistica.usuario=this.UserAuthService.usuarioEmail,this.estadisticasService.alta(this.estadistica),u().fire({icon:"success",title:"Fin de la partida!",text:`Finalizaste con ${this.cantRespuestasCorrectas} correctas en ${this.cantIntentos} preguntas`}),this.jugando=!1,!0)).catch(e=>{console.log(e)}),!1}cargarDatosPreguntaHtml(e){this.urlPregunta="Deportes"==e.categoria?this.urlDeportes:"Ciencia"==e.categoria?this.urlCiencia:this.urlGeografia,this.preguntasSeleccionadas.push(e),this.pregunta=e.pregunta,this.op1=e.op1,this.op2=e.op2,this.op3=e.op3,this.respuesta_correcta=e.respuesta_correcta}}return(s=i).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-preguntados"]],decls:7,vars:2,consts:[[1,"container"],[1,"container","border","border-5","rounded","shadow-lg","p-3","mb-5","rounded"],[1,"row"],[1,"col-md-12"],[4,"ngIf"],["id","titulo_productos",1,"h1","text-center"],["id","titulo_productos",1,"h3","text-center"],[1,"d-flex","flex-wrap","justify-content-center"],[1,"col-12","col-lg-4"],[1,"card","text-center",2,"width","18rem"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"d-grid","gap-2"],[1,"btn","btn-primary",3,"click"],["id","tablero"],[1,"text-center","mb-4"],["id","pregunta-titulo",1,"h3"],["alt","Imagen",1,"img-chica",3,"src"],["id","pregunta-respuestas",1,"list-group","list-group-flush"],["id","op1",1,"list-group-item","list-group-item-info","list-group-item-action",3,"click"],["id","op2",1,"list-group-item","list-group-item-info","list-group-item-action",3,"click"],["id","op3",1,"list-group-item","list-group-item-info","list-group-item-action",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"app-navbar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),t.YNc(5,Z,27,3,"ng-container",4),t.qZA()(),t.YNc(6,C,13,5,"ng-container",4),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngIf",!n.jugando),t.xp6(1),t.Q6J("ngIf",n.jugando))},dependencies:[o.O5,x.S],styles:[".img-chica[_ngcontent-%COMP%]{width:300px;height:auto}"]}),i})(),children:[]}];let _=(()=>{var s;class i{}return(s=i).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[l.Bz.forChild(T),o.ez,l.Bz]}),i})();var I=a(95),U=a(8524);let A=(()=>{var s;class i{}return(s=i).\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[o.ez,_,I.u5,U.m]}),i})()}}]);